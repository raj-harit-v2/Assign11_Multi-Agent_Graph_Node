================================================================================
COMPLEX QUERY NODE VISUALIZATION - ASCII FORMAT
================================================================================

Example Query: "Find the population of Tokyo, compare it with New York, 
                and calculate the percentage difference"

================================================================================
INITIAL PLAN GRAPH STRUCTURE
================================================================================

    [0] Fetch Tokyo Population Data
         Variants: 0A, 0B, 0C
         |
         v
    [1] Fetch New York Population Data
         Variants: 1A, 1B, 1C
         |
         v
    [2] Compare and Calculate Percentage
         Variants: 2A, 2B

================================================================================
EXECUTION SCENARIO 1: SUCCESSFUL PATH (NO FALLBACKS)
================================================================================

Step 0: Fetch Tokyo Population Data
  Trying variants: 0A, 0B, 0C
  [0A] Success! Result: Tokyo population = 13,960,000

Step 1: Fetch New York Population Data
  Trying variants: 1A, 1B, 1C
  [1A] Success! Result: NY population = 8,336,817

Step 2: Compare and Calculate Percentage
  Trying variants: 2A, 2B
  [2A] Success! Result: Tokyo is 67.3% larger

EXECUTION PATH: 0 -> 1 -> 2
NODES CALLED: ["0", "1", "2"]
NODES COMPACT: "A, A, A"
NODE COUNT: 3

================================================================================
EXECUTION SCENARIO 2: WITH FALLBACKS (COMPLEX)
================================================================================

Step 0: Fetch Tokyo Population Data
  Trying variants: 0A, 0B, 0C
  [0A] Failed: API timeout
  [0B] Failed: Invalid response format
  [0C] Success! Result: Tokyo population = 13,960,000

Step 1: Fetch New York Population Data
  Trying variants: 1A, 1B, 1C
  [1A] Failed: Rate limit exceeded
  [1B] Failed: Network error
  [1C] Failed: All variants exhausted
  Status: FAILED
  Creating fallback node...

Step 1F1: Fallback for step 1 - Alternative data source
  Trying variants: 1F1A
  [1F1A] Success! Result: NY population = 8,336,817 (from backup API)

Step 2: Compare and Calculate Percentage
  Trying variants: 2A, 2B
  [2A] Failed: Division by zero error
  [2B] Success! Result: Tokyo is 67.3% larger

GRAPH STRUCTURE AFTER EXECUTION:

    [0] Fetch Tokyo Population Data
         Variants: 0A (failed), 0B (failed), 0C (success)
         |
         v
    [1] Fetch New York Population Data
         Variants: 1A (failed), 1B (failed), 1C (failed)
         Status: FAILED
         |
         v
    [1F1] Fallback for step 1 - Alternative data source
         Variants: 1F1A (success)
         |
         v
    [2] Compare and Calculate Percentage
         Variants: 2A (failed), 2B (success)

EXECUTION PATH: 0 -> 1 -> 1F1 -> 2
NODES CALLED: ["0", "1", "1F1", "2"]
NODES COMPACT: "C, F1A, A"
NODE COUNT: 4

================================================================================
EXECUTION SCENARIO 3: MULTIPLE FALLBACKS (MOST COMPLEX)
================================================================================

Step 0: Fetch Tokyo Population Data
  Trying variants: 0A, 0B, 0C
  [0A] Failed: Connection error
  [0B] Failed: Invalid credentials
  [0C] Failed: Service unavailable
  Status: FAILED
  Creating fallback node...

Step 0F1: Fallback for step 0 - Use cached data
  Trying variants: 0F1A
  [0F1A] Failed: Cache expired
  Status: FAILED
  Creating fallback node...

Step 0F2: Fallback for step 0 - Manual input
  Trying variants: 0F2A
  [0F2A] Success! Result: Tokyo population = 13,960,000 (manual)

Step 1: Fetch New York Population Data
  Trying variants: 1A, 1B, 1C
  [1A] Success! Result: NY population = 8,336,817

Step 2: Compare and Calculate Percentage
  Trying variants: 2A, 2B
  [2A] Failed: Data format mismatch
  [2B] Failed: Calculation error
  Status: FAILED
  Creating fallback node...

Step 2F1: Fallback for step 2 - Simplified calculation
  Trying variants: 2F1A
  [2F1A] Success! Result: Tokyo is 67.3% larger (simplified method)

GRAPH STRUCTURE AFTER EXECUTION:

    [0] Fetch Tokyo Population Data
         Variants: 0A (failed), 0B (failed), 0C (failed)
         Status: FAILED
         |
         v
    [0F1] Fallback for step 0 - Use cached data
         Variants: 0F1A (failed)
         Status: FAILED
         |
         v
    [0F2] Fallback for step 0 - Manual input
         Variants: 0F2A (success)
         |
         v
    [1] Fetch New York Population Data
         Variants: 1A (success)
         |
         v
    [2] Compare and Calculate Percentage
         Variants: 2A (failed), 2B (failed)
         Status: FAILED
         |
         v
    [2F1] Fallback for step 2 - Simplified calculation
         Variants: 2F1A (success)

EXECUTION PATH: 0 -> 0F1 -> 0F2 -> 1 -> 2 -> 2F1
NODES CALLED: ["0", "0F1", "0F2", "1", "2", "2F1"]
NODES COMPACT: "F2A, A, F1A"
NODE COUNT: 6

================================================================================
CSV LOGGING FORMAT
================================================================================

For Scenario 3 (Most Complex):

tool_performance.csv row:
  Nodes_Called: ["0", "0F1", "0F2", "1", "2", "2F1"]
  Nodes_Compact: "F2A, A, F1A"
  Node_Count: 6
  Step_Details: {
    "variants_tried": ["0A", "0B", "0C", "0F1A", "0F2A", "1A", "2A", "2B", "2F1A"],
    "execution_path": "0->0F1->0F2->1->2->2F1",
    "node_variants": {
      "0": "0C",      // Last tried before failure
      "0F1": "0F1A",  // Failed
      "0F2": "0F2A",  // Success
      "1": "1A",      // Success
      "2": "2B",      // Last tried before failure
      "2F1": "2F1A"   // Success
    },
    "retries": 9
  }

================================================================================
NODE IDENTIFICATION RULES
================================================================================

Regular Nodes:
  - Format: "0", "1", "2", "3", ...
  - Variants: "0A", "0B", "0C", "1A", "1B", "1C", ...

Fallback Nodes:
  - Format: "{parent_node_id}F{fallback_number}"
  - Examples: "0F1", "0F2", "1F1", "2F1"
  - Variants: "0F1A", "0F2A", "1F1A", "2F1A", ...

Compact Format Rules:
  - Regular node with variant A: "A"
  - Regular node with variant B: "B"
  - Regular node with variant C: "C"
  - Fallback node 1F1 with variant A: "F1A"
  - Fallback node 0F2 with variant A: "F2A"
  - Multiple fallbacks: "F1A, F2A"

================================================================================
VISUAL GRAPH REPRESENTATION (ASCII ART)
================================================================================

Complex Query Execution Tree:

                    [0] Fetch Tokyo
                    /    |    \
                  0A    0B    0C (all failed)
                   |
                   v
            [0F1] Cache Fallback
                   |
                 0F1A (failed)
                   |
                   v
            [0F2] Manual Fallback
                   |
                 0F2A (SUCCESS)
                   |
                   v
            [1] Fetch New York
            /    |    \
          1A    1B    1C
           |
        (SUCCESS)
           |
           v
    [2] Compare & Calculate
    /    \
   2A    2B (both failed)
    |
    v
[2F1] Simplified Calc
    |
  2F1A (SUCCESS)
    |
    v
[END] Final Answer

================================================================================
EXECUTION TRACE SUMMARY
================================================================================

Node Execution Order: 0 -> 0F1 -> 0F2 -> 1 -> 2 -> 2F1
Successful Variants: 0F2A, 1A, 2F1A
Failed Variants: 0A, 0B, 0C, 0F1A, 2A, 2B
Total Nodes Executed: 6
Total Variants Tried: 9
Success Rate: 3/9 = 33.3%

Compact Representation: "F2A, A, F1A"
  - F2A: Fallback node 0F2, variant A (success)
  - A: Regular node 1, variant A (success)
  - F1A: Fallback node 2F1, variant A (success)

================================================================================

